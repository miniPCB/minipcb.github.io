<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>M55342 Part Number Generator</title>
  <style>
    :root {
      --bg: #0e1118;
      --panel: #151b25;
      --panel-2: #1b2330;
      --text: #e8edf5;
      --muted: #98a7bb;
      --accent: #2f88ff;
      --accent-2: #37c3ff;
      --border: #2d3a4d;
      --ok: #2ecc71;
      --warn: #f1c40f;
      --shadow: 0 8px 28px rgba(0, 0, 0, 0.35);
      --mono: "Consolas", "Courier New", monospace;
      --sans: "Segoe UI", "Trebuchet MS", sans-serif;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: var(--sans);
      color: var(--text);
      background:
        radial-gradient(circle at 20% 0%, #1b2434 0%, transparent 50%),
        radial-gradient(circle at 90% 100%, #132036 0%, transparent 45%),
        var(--bg);
      min-height: 100vh;
    }

    .page {
      width: min(1920px, calc(100vw - 24px));
      margin: 0 auto;
      padding: 16px;
      display: grid;
      grid-template-rows: auto 1fr;
      gap: 12px;
      min-height: 100vh;
    }

    .header {
      border: 1px solid var(--border);
      background: var(--panel);
      border-radius: 14px;
      box-shadow: var(--shadow);
      padding: 14px;
    }

    .title {
      margin: 0;
      font-size: 1.25rem;
      letter-spacing: 0.02em;
    }

    .subtitle {
      margin: 6px 0 0;
      color: var(--muted);
      font-size: 0.9rem;
    }

    .main {
      display: grid;
      grid-template-columns: minmax(320px, 34%) minmax(420px, 66%);
      gap: 12px;
      min-height: 0;
    }

    .panel {
      border: 1px solid var(--border);
      background: var(--panel);
      border-radius: 12px;
      box-shadow: var(--shadow);
      overflow: hidden;
      min-height: 0;
      display: flex;
      flex-direction: column;
    }

    .panel h2 {
      margin: 0;
      padding: 10px 12px;
      font-size: 1rem;
      border-bottom: 1px solid var(--border);
      background: #1a2230;
    }

    .panel-body {
      padding: 10px;
      overflow: auto;
    }

    .group {
      border: 1px solid var(--border);
      border-radius: 10px;
      background: #101823;
      padding: 10px;
      margin-bottom: 10px;
    }

    .group:last-child { margin-bottom: 0; }

    .group-title {
      margin: 0 0 8px;
      font-size: 0.8rem;
      text-transform: uppercase;
      letter-spacing: 0.04em;
      color: var(--muted);
    }

    .pill-cloud {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .filter-pill {
      border: 1px solid var(--border);
      border-radius: 999px;
      padding: 6px 11px;
      font-size: 0.82rem;
      line-height: 1.25;
      color: var(--text);
      background: #1a2638;
      cursor: pointer;
      user-select: none;
      white-space: nowrap;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }

    .filter-pill .count {
      color: var(--muted);
      font-size: 0.76rem;
      font-family: var(--mono);
    }

    .filter-pill.active {
      border-color: rgba(102, 163, 255, 0.7);
      background: rgba(102, 163, 255, 0.2);
      color: #d9ebff;
      box-shadow: inset 0 0 0 1px rgba(102, 163, 255, 0.28);
      font-weight: 700;
    }

    .filter-pill.disabled {
      opacity: 0.45;
      cursor: not-allowed;
    }

    .summary-line {
      display: grid;
      grid-template-columns: 1fr auto;
      gap: 10px;
      align-items: center;
      border-bottom: 1px solid var(--border);
      padding: 10px 12px;
      color: var(--muted);
      font-size: 0.88rem;
      background: #1a2230;
    }

    .summary-line strong {
      color: var(--text);
      font-family: var(--mono);
      font-size: 0.95rem;
    }

    .btn {
      border: 1px solid var(--border);
      background: #1e2837;
      color: var(--text);
      border-radius: 8px;
      min-height: 34px;
      padding: 0 10px;
      cursor: pointer;
      font-size: 0.82rem;
    }

    .btn:hover { border-color: #496287; }

    .results {
      overflow: auto;
      padding: 10px;
      display: grid;
      gap: 8px;
      align-content: start;
    }

    .result-card {
      border: 1px solid var(--border);
      background: #101823;
      border-radius: 10px;
      padding: 9px 11px;
    }

    .pn {
      font-family: var(--mono);
      font-weight: 700;
      color: #c6e3ff;
      word-break: break-all;
      font-size: 0.94rem;
    }

    .meta {
      margin-top: 6px;
      display: flex;
      flex-wrap: wrap;
      gap: 7px;
      color: var(--muted);
      font-size: 0.8rem;
    }

    .meta span {
      border: 1px solid var(--border);
      border-radius: 999px;
      padding: 3px 8px;
      background: #142033;
    }

    .note {
      margin-top: 10px;
      color: var(--muted);
      font-size: 0.82rem;
      line-height: 1.35;
    }

    @media (max-width: 980px) {
      .main { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>
  <div class="page">
    <section class="header">
      <h1 class="title">M55342 Part Number Generator</h1>
      <p class="subtitle">Select filter parameters. The result list always shows only remaining valid M55342 part number combinations.</p>
    </section>

    <section class="main">
      <aside class="panel">
        <h2>Filters</h2>
        <div class="panel-body">
          <div class="group">
            <p class="group-title">Case Size / Slash</p>
            <div id="sizeFilter" class="pill-cloud"></div>
          </div>
          <div class="group">
            <p class="group-title">Resistance</p>
            <div id="resFilter" class="pill-cloud"></div>
          </div>
          <div class="group">
            <p class="group-title">Tolerance Code</p>
            <div id="tolFilter" class="pill-cloud"></div>
          </div>
          <div class="group">
            <p class="group-title">TCR Code</p>
            <div id="tcrFilter" class="pill-cloud"></div>
          </div>
          <div class="group">
            <p class="group-title">Failure Rate Code</p>
            <div id="frFilter" class="pill-cloud"></div>
          </div>
          <div class="group">
            <p class="group-title">Packaging</p>
            <div id="pkgFilter" class="pill-cloud"></div>
          </div>
          <button id="clearBtn" class="btn" type="button">Clear All Filters</button>
          <p class="note">
            Generator model format: <span style="font-family: var(--mono);">M55342K[Slash][TCR][ResCode][Tol][FR][Pkg]</span><br />
            This page uses a constrained in-browser M55342 code model for interactive filtering.
          </p>
        </div>
      </aside>

      <section class="panel">
        <h2>Remaining Part Numbers</h2>
        <div class="summary-line">
          <span id="statusText">Ready</span>
          <strong id="resultCount">0</strong>
        </div>
        <div id="results" class="results"></div>
      </section>
    </section>
  </div>

  <script>
    const sizeOptions = [
      { key: "01", label: "01 (0402, 1/16W)" },
      { key: "02", label: "02 (0603, 1/10W)" },
      { key: "03", label: "03 (0805, 1/8W)" },
      { key: "04", label: "04 (1206, 1/4W)" },
      { key: "05", label: "05 (2010, 1/2W)" },
      { key: "06", label: "06 (2512, 1W)" }
    ];

    const resistanceOptions = [
      { key: "10R0", ohms: 10, label: "10 ohm" },
      { key: "24R9", ohms: 24.9, label: "24.9 ohm" },
      { key: "49R9", ohms: 49.9, label: "49.9 ohm" },
      { key: "1000", ohms: 100, label: "100 ohm" },
      { key: "2210", ohms: 221, label: "221 ohm" },
      { key: "4990", ohms: 499, label: "499 ohm" },
      { key: "1K00", ohms: 1000, label: "1 kohm" },
      { key: "2K49", ohms: 2490, label: "2.49 kohm" },
      { key: "4K99", ohms: 4990, label: "4.99 kohm" },
      { key: "10K0", ohms: 10000, label: "10 kohm" },
      { key: "16K7", ohms: 16670, label: "16.67 kohm" },
      { key: "24K9", ohms: 24900, label: "24.9 kohm" },
      { key: "49K9", ohms: 49900, label: "49.9 kohm" },
      { key: "100K", ohms: 100000, label: "100 kohm" },
      { key: "249K", ohms: 249000, label: "249 kohm" },
      { key: "499K", ohms: 499000, label: "499 kohm" },
      { key: "1M00", ohms: 1000000, label: "1 Mohm" }
    ];

    const toleranceOptions = [
      { key: "F", label: "F (1%)" },
      { key: "D", label: "D (0.5%)" },
      { key: "C", label: "C (0.25%)" },
      { key: "B", label: "B (0.1%)" }
    ];

    const tcrOptions = [
      { key: "A", label: "A (25 ppm/C)" },
      { key: "B", label: "B (50 ppm/C)" },
      { key: "C", label: "C (100 ppm/C)" }
    ];

    const failureRateOptions = [
      { key: "M", label: "M (1%)" },
      { key: "P", label: "P (0.1%)" },
      { key: "R", label: "R (0.01%)" }
    ];

    const packagingOptions = [
      { key: "T", label: "T (Tape)" },
      { key: "B", label: "B (Bulk)" }
    ];

    const filters = {
      size: null,
      resistance: null,
      tolerance: null,
      tcr: null,
      failure: null,
      packaging: null
    };

    const nodes = {
      size: document.getElementById("sizeFilter"),
      resistance: document.getElementById("resFilter"),
      tolerance: document.getElementById("tolFilter"),
      tcr: document.getElementById("tcrFilter"),
      failure: document.getElementById("frFilter"),
      packaging: document.getElementById("pkgFilter"),
      results: document.getElementById("results"),
      resultCount: document.getElementById("resultCount"),
      statusText: document.getElementById("statusText"),
      clearBtn: document.getElementById("clearBtn")
    };

    const optionMap = {
      size: sizeOptions,
      resistance: resistanceOptions,
      tolerance: toleranceOptions,
      tcr: tcrOptions,
      failure: failureRateOptions,
      packaging: packagingOptions
    };

    const partCatalog = buildCatalog();

    function buildCatalog() {
      const rows = [];
      for (const sz of sizeOptions) {
        for (const rs of resistanceOptions) {
          for (const tol of toleranceOptions) {
            for (const tcr of tcrOptions) {
              for (const fr of failureRateOptions) {
                for (const pkg of packagingOptions) {
                  rows.push({
                    size: sz.key,
                    sizeLabel: sz.label,
                    resistance: rs.key,
                    resistanceLabel: rs.label,
                    resistanceOhms: rs.ohms,
                    tolerance: tol.key,
                    toleranceLabel: tol.label,
                    tcr: tcr.key,
                    tcrLabel: tcr.label,
                    failure: fr.key,
                    failureLabel: fr.label,
                    packaging: pkg.key,
                    packagingLabel: pkg.label,
                    pn: "M55342K" + sz.key + tcr.key + rs.key + tol.key + fr.key + pkg.key
                  });
                }
              }
            }
          }
        }
      }
      return rows;
    }

    function matchesFilters(item, ignoreKey) {
      if (ignoreKey !== "size" && filters.size && item.size !== filters.size) return false;
      if (ignoreKey !== "resistance" && filters.resistance && item.resistance !== filters.resistance) return false;
      if (ignoreKey !== "tolerance" && filters.tolerance && item.tolerance !== filters.tolerance) return false;
      if (ignoreKey !== "tcr" && filters.tcr && item.tcr !== filters.tcr) return false;
      if (ignoreKey !== "failure" && filters.failure && item.failure !== filters.failure) return false;
      if (ignoreKey !== "packaging" && filters.packaging && item.packaging !== filters.packaging) return false;
      return true;
    }

    function filteredCatalog() {
      return partCatalog.filter((item) => matchesFilters(item, null));
    }

    function countByKey(filterKey, optionKey) {
      return partCatalog.filter((item) => matchesFilters(item, filterKey) && item[filterKey] === optionKey).length;
    }

    function renderFilterGroup(filterKey, host, options) {
      host.innerHTML = "";
      for (const opt of options) {
        const count = countByKey(filterKey, opt.key);
        const pill = document.createElement("button");
        pill.type = "button";
        pill.className = "filter-pill";
        if (filters[filterKey] === opt.key) pill.classList.add("active");
        if (count === 0) pill.classList.add("disabled");
        pill.innerHTML = "<span>" + opt.label + "</span><span class=\"count\">" + count + "</span>";
        pill.disabled = count === 0 && filters[filterKey] !== opt.key;
        pill.addEventListener("click", () => {
          filters[filterKey] = (filters[filterKey] === opt.key) ? null : opt.key;
          renderAll();
        });
        host.appendChild(pill);
      }
    }

    function renderResults() {
      const rows = filteredCatalog();
      nodes.resultCount.textContent = rows.length + " matches";
      nodes.statusText.textContent = rows.length ? "Filtered M55342 catalog results" : "No matching combination";
      nodes.results.innerHTML = "";

      if (!rows.length) {
        const empty = document.createElement("div");
        empty.className = "result-card";
        empty.innerHTML = "<div class=\"pn\">No valid M55342 part numbers for current selections.</div><div class=\"meta\"><span>Adjust or clear one filter.</span></div>";
        nodes.results.appendChild(empty);
        return;
      }

      const maxShown = 400;
      const shown = rows.slice(0, maxShown);
      for (const row of shown) {
        const card = document.createElement("article");
        card.className = "result-card";
        card.innerHTML =
          "<div class=\"pn\">" + row.pn + "</div>" +
          "<div class=\"meta\">" +
          "<span>" + row.sizeLabel + "</span>" +
          "<span>" + row.resistanceLabel + "</span>" +
          "<span>" + row.toleranceLabel + "</span>" +
          "<span>" + row.tcrLabel + "</span>" +
          "<span>" + row.failureLabel + "</span>" +
          "<span>" + row.packagingLabel + "</span>" +
          "</div>";
        nodes.results.appendChild(card);
      }

      if (rows.length > maxShown) {
        const more = document.createElement("div");
        more.className = "result-card";
        more.innerHTML = "<div class=\"pn\">Showing first " + maxShown + " of " + rows.length + " matches.</div>";
        nodes.results.appendChild(more);
      }
    }

    function renderAll() {
      renderFilterGroup("size", nodes.size, sizeOptions);
      renderFilterGroup("resistance", nodes.resistance, resistanceOptions);
      renderFilterGroup("tolerance", nodes.tolerance, toleranceOptions);
      renderFilterGroup("tcr", nodes.tcr, tcrOptions);
      renderFilterGroup("failure", nodes.failure, failureRateOptions);
      renderFilterGroup("packaging", nodes.packaging, packagingOptions);
      renderResults();
    }

    nodes.clearBtn.addEventListener("click", () => {
      for (const k of Object.keys(filters)) filters[k] = null;
      renderAll();
    });

    filters.size = "03";
    filters.resistance = "16K7";
    renderAll();
  </script>
</body>
</html>
